# GPT-002: Schema JSONSchema export

**Priority**: P1  
**Owner**: TBD  
**Created**: 2025-01-02  
**Parent**: GPT-000  

## Goal
Auto-generate JSONSchema from OpenAPI spec for the trades export endpoint, enabling GPT team to validate responses programmatically.

## Acceptance Criteria
- [ ] `schemas/trades_export_v0.7.0.json` file created with valid JSONSchema
- [ ] Schema auto-generated from `docs/gpt_action/walletdoctor_action_clean.yaml`
- [ ] Schema validates successfully with `ajv` (JSON Schema validator)
- [ ] Test response from production endpoint passes schema validation
- [ ] Schema includes all trade object properties with correct types
- [ ] Version number matches current API version (v0.7.0)

## Out of Scope
- Schema for other endpoints (positions, etc.)
- Custom validation rules beyond type checking
- Schema versioning strategy (future work)
- TypeScript type generation (see GPT-003)

## Testing
- [ ] Unit test validating schema against known-good response
- [ ] Unit test rejecting malformed response  
- [ ] Integration test against live endpoint response
- [ ] Schema validates in online JSONSchema validator

## Implementation Notes
Tools to consider:
- `openapi-to-jsonschema` npm package
- Manual extraction focusing on `/v4/trades/export-gpt/{wallet}` endpoint
- Include example values from OpenAPI spec

Example schema structure:
```json
{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "TradesExportResponse",
  "type": "object",
  "required": ["wallet", "signatures", "trades"],
  "properties": {
    "wallet": { "type": "string", "minLength": 32 },
    "signatures": { 
      "type": "array",
      "items": { "type": "string" }
    },
    "trades": {
      "type": "array", 
      "items": { "$ref": "#/definitions/Trade" }
    }
  }
}
```

## Definition of Done
JSONSchema file generated from OpenAPI spec that successfully validates production API responses using standard JSONSchema validators like `ajv`. 