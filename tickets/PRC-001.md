# PRC-001: Helius-only pricing for positions endpoint

## Status: READY FOR DEVELOPMENT ðŸš€

### Description
Wire up current price data (current_price_usd) in the positions endpoint so GPT prompts can discuss dollar values. Currently positions return with pricing fields as zero/null.

### Prerequisites 
- âœ… POS-001: Position builder working (demo wallet returns â‰¥1 position)
- âœ… POS-002: Production endpoint fixed (positions pipeline working end-to-end)

### Goal
Enable production `/v4/positions/export-gpt/{wallet}` to return meaningful current_price_usd values using Helius price extraction instead of zeros.

### Acceptance Criteria
- Demo wallet positions show current_price_usd > 0 for major tokens
- price_confidence reflects data quality (HIGH for recent swaps, ESTIMATED for older)
- Pricing doesn't significantly impact response times (<5s total)

### Next Steps
1. Analyze existing Helius price extraction logic
2. Ensure integration with production pricing flow  
3. Test with demo wallets for price accuracy

## Out of Scope
- Redis caching optimization (separate ticket CCH-001)
- Price source fallbacks beyond Helius
- Historical price data accuracy improvements
- Position calculation fixes (handled in POS-001)

## Testing
- [ ] Unit tests for Helius price extraction
- [ ] Integration test with test wallet showing prices populated
- [ ] Performance validation: 10 consecutive requests <8s each
- [ ] Smoke test updated to validate price fields present

## Implementation Notes
- Leverage existing `PRICE_HELIUS_ONLY` environment variable
- Use Helius transaction data for price extraction as currently implemented
- Ensure `UnrealizedPnLCalculator` works with Helius-only mode
- Update API documentation to reflect pricing availability

## Definition of Done
Both endpoints return price data within performance targets using only Helius API, with smoke tests validating the integration. 