# PRC-001: Re-enable Helius-only pricing

**Priority**: P2  
**Owner**: TBD  
**Created**: 2025-01-02  
**Blocks**: v0.8.0-prices  

## Goal
Restore current price data to both trades and positions endpoints using only Helius API, eliminating Birdeye dependency and simplifying the pricing pipeline.

## Acceptance Criteria
- [ ] `/v4/trades/export-gpt/{wallet}` includes `current_price_usd` field in trade objects
- [ ] `/v4/positions/export-gpt/{wallet}` includes `current_price_usd` in position objects  
- [ ] Cold response time <8 seconds for test wallet (34zYDgjy...)
- [ ] Warm response time <1 second for cached positions
- [ ] No Birdeye API calls made (`PRICE_HELIUS_ONLY=true` enforced)
- [ ] Price confidence levels working: `high`, `est`, `stale`

## Out of Scope
- Redis caching optimization (separate ticket CCH-001)
- Price source fallbacks beyond Helius
- Historical price data accuracy improvements
- Position calculation fixes (handled in POS-001)

## Testing
- [ ] Unit tests for Helius price extraction
- [ ] Integration test with test wallet showing prices populated
- [ ] Performance validation: 10 consecutive requests <8s each
- [ ] Smoke test updated to validate price fields present

## Implementation Notes
- Leverage existing `PRICE_HELIUS_ONLY` environment variable
- Use Helius transaction data for price extraction as currently implemented
- Ensure `UnrealizedPnLCalculator` works with Helius-only mode
- Update API documentation to reflect pricing availability

## Definition of Done
Both endpoints return price data within performance targets using only Helius API, with smoke tests validating the integration. 